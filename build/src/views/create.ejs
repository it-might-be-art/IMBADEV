<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/nano.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/@simonwep/pickr@1.8.2/dist/pickr.min.js"></script>
  <%- include('partials/header', { title: title }) %>
</head>
<body>
  <div id="content" class="fade-in">
  <%- include('partials/navigation', { profile: profile }) %>

  <section class="sub-hero">
    <div class="container center">
      <div class="imba-teaser">
        <div class="logo-wrapper-2">
          <h1 class="heading">create</span></h1>
        </div>
      </div>
      <div class="share-wrapper center">
        <p>download your creation, share it and don&#x27;t forget to tag <a href="https://x.com/PunkApepen" target="_blank"><span class="textlink">@PunkApepen</span></a> and <a href="https://x.com/ItMightBeArt" target="_blank"><span class="textlink">@ItMightBeArt</span></a></p>
      </div>
    </div>
  </section>

  <section class="section-top">
    <div class="container center">
      <div id="cursorCanvas" class="cursordiv"></div>
      <div id="create" class="creator-frame">
        <div class="creation-wrapper">
          <div id="grid-container" class="w-embed">
            <svg id="grid" width="640" height="640" viewBox="0 0 640 640"></svg>
          </div>
        </div>
        <div class="toolbox">
          <div id="color-picker-container" class="tools">
            <div class="tools-wrapper">
              <select class="select-grid" id="gridSizeSelector">
                <option value="8">8x8</option>
                <option value="16">16x16</option>
                <option value="32">32x32</option>
                
              </select>
              <button class="btn-grid" id="clearCanvasButton">clear canvas</button>
              <button id="toggleGridButton" href="#" class="btn-grid w-inline-block">hide grid</button>
              <div class="tools-hor">
                <button class="undo" id="undoButton" title="undo"></button>
                <button class="redo" id="redoButton" title="redo"></button>
              </div>
            </div>
          </div>

          <div class="edit-tools">
            <div class="tool-block-wrapper color-block">
              
              <div class="tool-block">
                <p class="tool-title">color</p>
                <div class="div-block-8">
                  <div id="colorPickerContainer" class="pickr-container" title="color"></div>
                  <a id="eyeDropperButton" href="#" class="pipette w-button"></a>
                </div>
              </div>

              <div class="tool-block bg">
                <p class="tool-title bg">canvas</p>
                <div id="backgroundColorPickerContainer" class="pickr-container" title="background-color"></div>
              </div>

            </div>

            
            <div class="tool-block-wrapper">
              <!-- <p class="tool-title">brush size</p> -->
              <div class="brushes w-embed">
                <div id="cursorCanvas"></div>
                <button class="brush-size-button size1 active" data-size="1" title="brush-size 1"></button>
                <button class="brush-size-button size2" data-size="2" title="brush-size 2"></button>
                <button class="brush-size-button size3" data-size="4" title="brush-size 3"></button>
              </div>
              <!-- <p class="tool-title">mode</p> -->
              <div class="mode-wrapper w-embed">
                <button id="drawModeButton" class="tool-button draw active" title="draw"></button>
                <button id="eraseModeButton" class="tool-button erase" title="erase"></button>
              </div>
            </div>
          </div>
        </div>

        <div class="download-buttons">
          <a id="downloadSVG" href="#" class="action-btn download w-button">download svg</a>
          <a id="downloadPNG" href="#" class="action-btn download w-button">download png</a>
          <a id="downloadIMBA" href="#" class="action-btn download download-imba w-button">download imba</a>
          <a id="submitButton" href="#" class="action-btn submit w-button">submit</a>
          <a id="shareButton" href="#save-import" class="action-btn info w-button">about imba</a>
        </div>
      </div>
    </div>
  </section>


  <section id="save-import" class="short-section">
    <div class="container center">
      <div class="s-wrapper">
        
       
            <!-- <input class="file-upload" type="file" id="uploadIMBA" accept=".imba" /> -->
            <div id="upload-area" class="upload-area">
              <input class="file-upload" type="file" id="uploadIMBA" accept=".imba" />
              <div id="upload-area">
                <p>Drag & drop your .imba file here or click to upload</p>
              </div>
            </div>
       
        
        <div>
          <h3>save, import &amp; share</h3>
          <p>The <code>*.imba</code> file format allows you to save your current grid design to your local machine. This file captures the state of your artwork, including the position and color of each grid cell. You can import an <code>*.imba</code> file later to continue working on your design, share it with others, or finalize it at your convenience. This format is ideal for collaborative projects, enabling seamless transitions between different stages of your work.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Modal Structure -->
  <div id="submitModal" class="modal">
    <div class="modal-content">
      <h4>Submit Your Art</h4>
      <div id="modalImageContainer">
        <!-- SVG image will be inserted here -->
      </div>

      <div class="upload-fields">
        <!-- <label for="imageTitle">Title</label> -->
        <input type="text" id="imageTitle" name="imageTitle" placeholder="title" required>
        <!-- <label for="imageDescription">Description (optional, max 100 characters):</label> --> 
        <input type="text" id="imageDescription" placeholder="description" maxlength="100">
        <!-- <p id="input-length">0/100</p> -->
      </div>
      <div id="walletMessage" style="color: red; display: none;">
        Please connect your wallet to submit.
      </div>
      <div class="modal-footer">
        <button id="modalBackButton" class="modal-close btn">Back</button>
        <button id="modalSubmitButton" class="btn">Submit</button>
      </div>
    </div>
  </div>

  <div id="infoModal" class="info-modal">
    <div class="info-modal-content">
      <span id="infoModalClose" class="info-modal-close">&times;</span>
      <p id="infoModalMessage">error message</p>
    </div>
  </div>

  <%- include('partials/footer') %>

  <!-- close fade-in div -->
  </div>
  
  <script src="/js/uploadModule.js"></script>
  <script src="/js/pixel-canvas.js"></script>
</body>
</html>
